<!DOCTYPE html>
{%load static%}
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link src ="https://necolas.github.io/normalize.css/5.0.0/normalize.css">
    <link rel="stylesheet" href="{% static 'css/remodal.css' %}">
    <link rel="stylesheet" href="{% static 'css/remodal-default-theme.css' %}">
    <link href ="{% static 'css/style.css' %}" type ="text/css" rel ="stylesheet">
    <title>Problem Detail</title>
  </head>

  <body class ="prob-detailbody">
    <input id="userId" type="hidden" name="user_id" value="{{request.user.id}}">
    <header>
      <li><a href ="/diag_app/"><img class ="templatelogo" src ="{% static 'images/logo-template.png' %}"></a></li>

      <form>
        <input class ="search" type ="text" placeholder ="Search" name ="search"></input>
      <form>

      <nav class ="templatenav">

        <!-- ask questions -->
      <div class ="askmodal-container">
        <li><a data-remodal-target="modal" class ="link1" href="#modal">Ask Question</a></li>

        <div class="remodal" data-remodal-id="modal">
        <button data-remodal-action="close" class="remodal-close"></button>
          <p>Stuff</p>
        </div>
      </div>

      <!-- answer questions -->
      <div class ="answermodal-container">
        <li><a data-remodal-target="modal" class ="link2" href="#modal">Answer Questions</a></li>

        <div class="remodal" data-remodal-id="modal">
        <button data-remodal-action="close" class="remodal-close"></button>
          <p>Stuff</p>
        </div>
      </div>

      <!-- my account -->
        <li><a class ="link3" href ="#">MY Account</a>
          <ul class ="dropdown">
            <li class ="droplist"><a href ="#">Notifications</a></li>
            <li class ="droplist"><a href ="/accounts/profile/">Profile</a></li>
            <li class ="droplist"><a href ="/logout/">Log Out</a></li>
          </ul>
        </li>
      </nav>
    </header>


    <section class ="prob-detail-boxes-container">
      <h2 class="prob-detail-box-name">Problem</h2>

      <div id="problemDetail" class="prob-detail-question-box prob-detail-boxes">

      </div>

      <div id="solutions">

      </div>

      <h2 class="prob-detail-box-name">Post new Solution</h2>
      <form class="solution-input" action="submit" method="POST">
          <h1>Post a new Solution</h1>
          {%csrf_token%}
          <h4>Enter the time required for your solution:</h4>
          <input id="solutionTime" type="text" name="solutionTime" value="Enter time here">

          <h4>Enter the parts cost, if any, for this solution:</h4>
          <input id="partsCost" type="text" name="partsCost" value="Enter cost here">

          <h4>Describe your solution:</h4>
          <textarea id="solutionText" type="text" name="solutionText" value="" rows="10" cols="65"></textarea>
          <input id="newSolutionSubmit" type="submit" value="Submit">
      </form>

    </section>

    <footer>
      <p>Copyright Bike MD 2017. All rights reserved.</p>
    </footer>

    <script id="problem-template" type="text/x-handlebars-template">
        <article class="post-container">
            {%verbatim%}
            <input id="problemId" type="hidden" name="problem_id" value="{{id}}">
                <h2 class="question-title">{{title}}</h2>
                <h5 class="date-time">{{{formatTime posted}}}</h5>
                <h5 class="posted-by">{{tech.user.username}}</h5>
                <h5 class="question-text">{{description}}</h5>
            {% endverbatim %}
        </article>
    </script>

    <script id="solution-template" type="text/x-handlebars-template">
        <article class="post-container">
            {%verbatim%}
            {{#each .}}
            <div class ="prob-detail-solution-box prob-detail-boxes">
                <h2 class="prob-detail-box-name">Answer:</h2>
                <h5 class="date-time">{{{formatTime this.posted}}}</h5>
                <h5 class="posted-by">{{this.tech.user.username}}</h5>
                <h5 class="solution-text">{{this.description}}</h5>
                <h5 id="solutionScore{{id}}" class="solution-score">Score: {{this.score}}</h5>
                <button class="up-vote" type="submit" onclick="validateVote({{id}}, 1)">
                Up</button>
                <button class="down-vote" type="submit" onclick="validateVote({{id}}, -1)">
                Down</button>
            </div>
            {{/each}}
            {% endverbatim %}
        </article>
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.6/handlebars.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <script type="text/javascript" src="{% static 'js/problem_detail.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/remodal.min.js' %}"></script>
  </body>
</html>
